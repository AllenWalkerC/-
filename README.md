### 在线随机音乐播放器

这是一款在线随机音乐播放器

支持播放，暂停，下一曲，频道切换，音量调节，进度调节，歌词同步滚动，播放历史，播放器收起展示功能。

使用技术：

jQuery，HTML5，CSS3

使用面向对象的方式提高代码的可读性和复用性，使用AJAX异步获取歌曲，歌词，频道数据放在了一个数组中，因为当网络不好的时候先获取频道数据在获取歌曲数据会有点慢和卡顿。使用css3的背景色渐变来实现播放器整个的配色，使用jQuery的动画方法实现了歌词的淡出淡入，频道列表的滑出滑入，播放器的图标都使用了iconfont的图标，通过unicode方式引用。歌词的同步和进度条的同步都是通过监听playing事件，同时使用 setInterval方法来实现，没有用timeupdate事件是因为每秒触发次数太多，用状态锁虽然能大致实现1秒触发一次但是歌曲时间的同步会出现跳秒的情况，歌词的显示则是通过正则将歌词时间和文本内容分离出来，在播放的时候不断的对比播放时间和歌词时间实现歌词的显示。

这个项目一共做了3版，第一版就是简单实现播放暂停，进度条的拖动，独立实现了基本功能，在做第二版的时候，碰到的最大难题就是歌词的拆解和显示，通过查阅资料了解其他播放器的歌词解析方式，也明白了歌词为什么是[时间]内容这种格式，还碰到了连续点击出现的歌词错乱问题，解决方式本来使用的是延迟用户点击，就是用户连续点击只有最后一次生效，但是体验不是很好，最后改成了状态锁方式加每首歌词到来之前清除上一首歌词的方式成功解决，由于样式太丑，自己对代码的结构并不是很满意，而且使用的是先获取频道数据再获取歌曲数据这种方式，所以获取歌曲有点慢，所以又重新做了第三版，第三版重新优化了样式和请求歌曲数据的方式，优化了进度条和音量条的点击坐标数值，之前使用的是clientX/Y获取的坐标，但是这样获取的坐标不准确，改成了offsetX/Y的方式获取，这样更准确，取消上一曲功能，增加了播放历史用户只需要点击播放历史中对应的歌曲就能重新播放已听过的歌曲，优化用户的体验，最终实现了这样一款在线随机音乐播放器。



































